<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    span.s1 {font: 12.0px 'Apple Color Emoji'}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Edit Catering Quote - Nutmeg Creole Kitchen&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: Arial, sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 800px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0 auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f5f5f5;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 30px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 2px 10px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.header {</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 30px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 3px solid #2c5aa0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.form-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #333;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>input, select, textarea {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid #ddd;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 16px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.menu-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #f9f9f9;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 10px 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid #e0e0e0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.menu-item-row {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: grid;</p>
<p class="p1"><span class="Apple-converted-space">            </span>grid-template-columns: 2fr 1fr 1fr 1fr auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 12px 25px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 16px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 5px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-approve {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #28a745;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-reject {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #dc3545;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-add {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #007bff;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-remove {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #dc3545;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 5px 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.totals {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #e9ecef;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 20px 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.loading {</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 50px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.error {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #f8d7da;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #721c24;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 20px 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.success {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #d4edda;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #155724;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 20px 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>@media (max-width: 768px) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>.menu-item-row {</p>
<p class="p1"><span class="Apple-converted-space">                </span>grid-template-columns: 1fr;</p>
<p class="p1"><span class="Apple-converted-space">                </span>gap: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="header"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h1&gt;Catering Quote Management&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2&gt;Nutmeg Creole Kitchen&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="loading" class="loading"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p&gt;Loading quote data...&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="error-message" class="error" style="display: none;"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="success-message" class="success" style="display: none;"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;form id="quote-form" style="display: none;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="hidden" id="request_id" name="request_id"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="hidden" id="secure_token" name="secure_token"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3&gt;Customer Information&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="customer_name"&gt;Customer Name:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="customer_name" name="customer_name" readonly&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="customer_email"&gt;Email:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="email" id="customer_email" name="customer_email" readonly&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="customer_phone"&gt;Phone:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="tel" id="customer_phone" name="customer_phone" readonly&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3&gt;Event Details&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="event_date"&gt;Event Date:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="date" id="event_date" name="event_date"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="event_time"&gt;Event Time:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="time" id="event_time" name="event_time"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="catering_type"&gt;Service Type:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;select id="catering_type" name="catering_type"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="delivery"&gt;Delivery&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="pickup"&gt;Pickup&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="full-service"&gt;Full Service&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3&gt;Address (if delivery/full-service)&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="street_address"&gt;Street Address:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="street_address" name="street_address"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="city"&gt;City:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="city" name="city"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="postal_code"&gt;Postal Code:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="postal_code" name="postal_code"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3&gt;Menu Items&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="menu-items-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Menu items will be loaded here --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button type="button" class="btn btn-add" onclick="addMenuItem()"&gt;+ Add Menu Item&lt;/button&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="totals"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;strong&gt;Subtotal: $&lt;span id="subtotal"&gt;0.00&lt;/span&gt;&lt;/strong&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;strong&gt;Tax (13%): $&lt;span id="tax"&gt;0.00&lt;/span&gt;&lt;/strong&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div style="font-size: 1.2em; margin-top: 10px;"&gt;&lt;strong&gt;Total: $&lt;span id="total"&gt;0.00&lt;/span&gt;&lt;/strong&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3&gt;Special Instructions&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="special_instructions"&gt;Special Instructions:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;textarea id="special_instructions" name="special_instructions" rows="4"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="form-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="allergies"&gt;Allergies/Dietary Restrictions:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="allergies" name="allergies"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div style="text-align: center; margin-top: 30px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button type="button" class="btn btn-approve" onclick="approveQuote()"&gt;<span class="s1">✅</span> Approve Quote&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button type="button" class="btn btn-reject" onclick="rejectQuote()"&gt;<span class="s1">❌</span> Reject Quote&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/form&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let quoteData = {};</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Get URL parameters</p>
<p class="p1"><span class="Apple-converted-space">        </span>function getUrlParameter(name) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const regex = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const results = regex.exec(location.search);</p>
<p class="p1"><span class="Apple-converted-space">            </span>return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Load quote data on page load</p>
<p class="p1"><span class="Apple-converted-space">        </span>window.onload = async function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const quoteId = getUrlParameter('id');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const token = getUrlParameter('token');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!quoteId || !token) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showError('Invalid quote link. Missing ID or token.');</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// REPLACE THIS URL WITH YOUR ACTUAL N8N WEBHOOK URL</p>
<p class="p1"><span class="Apple-converted-space">                </span>const response = await fetch('https://YOUR-N8N-INSTANCE.com/webhook/get-quote', {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>method: 'POST',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>headers: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>'Content-Type': 'application/json',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>body: JSON.stringify({</p>
<p class="p1"><span class="Apple-converted-space">                        </span>query: { id: quoteId, token: token }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>})</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!response.ok) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>throw new Error('Failed to load quote data');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>quoteData = await response.json();</p>
<p class="p1"><span class="Apple-converted-space">                </span>populateForm();</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('loading').style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('quote-form').style.display = 'block';</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showError('Error loading quote: ' + error.message);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function populateForm() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Populate form fields</p>
<p class="p1"><span class="Apple-converted-space">            </span>Object.keys(quoteData).forEach(key =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const element = document.getElementById(key);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (element &amp;&amp; quoteData[key] !== undefined) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>element.value = quoteData[key];</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Populate menu items</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (quoteData.menu_items) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const container = document.getElementById('menu-items-container');</p>
<p class="p1"><span class="Apple-converted-space">                </span>container.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>quoteData.menu_items.forEach((item, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>addMenuItem(item, index);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>calculateTotals();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function addMenuItem(item = {}, index = null) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const container = document.getElementById('menu-items-container');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const itemIndex = index !== null ? index : container.children.length;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const menuItem = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">            </span>menuItem.className = 'menu-item';</p>
<p class="p1"><span class="Apple-converted-space">            </span>menuItem.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="menu-item-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="text" placeholder="Item Name" value="${item.name || ''}" onchange="calculateTotals()" data-field="name" data-index="${itemIndex}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="number" placeholder="Qty" value="${item.quantity || 1}" min="1" onchange="calculateTotals()" data-field="quantity" data-index="${itemIndex}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="number" placeholder="Price" value="${item.price || 0}" min="0" step="0.01" onchange="calculateTotals()" data-field="price" data-index="${itemIndex}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="item-total"&gt;$${((item.quantity || 1) * (item.price || 0)).toFixed(2)}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button type="button" class="btn-remove" onclick="removeMenuItem(this)"&gt;Remove&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>container.appendChild(menuItem);</p>
<p class="p1"><span class="Apple-converted-space">            </span>calculateTotals();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function removeMenuItem(button) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>button.closest('.menu-item').remove();</p>
<p class="p1"><span class="Apple-converted-space">            </span>calculateTotals();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function calculateTotals() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let subtotal = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const menuItems = [];</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.menu-item').forEach((item, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const name = item.querySelector('[data-field="name"]').value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const quantity = parseInt(item.querySelector('[data-field="quantity"]').value) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const price = parseFloat(item.querySelector('[data-field="price"]').value) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const total = quantity * price;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>item.querySelector('.item-total').textContent = `$${total.toFixed(2)}`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>subtotal += total;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (name) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>menuItems.push({ name, quantity, price, total: total.toFixed(2) });</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const tax = subtotal * 0.13;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const finalTotal = subtotal + tax;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('subtotal').textContent = subtotal.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('tax').textContent = tax.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('total').textContent = finalTotal.toFixed(2);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update quoteData</p>
<p class="p1"><span class="Apple-converted-space">            </span>quoteData.menu_items = menuItems;</p>
<p class="p1"><span class="Apple-converted-space">            </span>quoteData.subtotal = subtotal.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>quoteData.tax_amount = tax.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>quoteData.final_total = finalTotal.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function approveQuote() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// Collect all form data</p>
<p class="p1"><span class="Apple-converted-space">                </span>const formData = new FormData(document.getElementById('quote-form'));</p>
<p class="p1"><span class="Apple-converted-space">                </span>const approvedData = Object.fromEntries(formData);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Add menu items and calculated totals</p>
<p class="p1"><span class="Apple-converted-space">                </span>approvedData.menu_items = quoteData.menu_items;</p>
<p class="p1"><span class="Apple-converted-space">                </span>approvedData.subtotal = quoteData.subtotal;</p>
<p class="p1"><span class="Apple-converted-space">                </span>approvedData.tax_amount = quoteData.tax_amount;</p>
<p class="p1"><span class="Apple-converted-space">                </span>approvedData.final_total = quoteData.final_total;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// REPLACE THIS URL WITH YOUR ACTUAL N8N WEBHOOK URL</p>
<p class="p1"><span class="Apple-converted-space">                </span>const response = await fetch('https://YOUR-N8N-INSTANCE.com/webhook/approve-quote', {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>method: 'POST',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>headers: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>'Content-Type': 'application/json',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>body: JSON.stringify(approvedData)</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!response.ok) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>throw new Error('Failed to approve quote');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>showSuccess('Quote approved successfully! Customer has been notified.');</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('quote-form').style.display = 'none';</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showError('Error approving quote: ' + error.message);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>async function rejectQuote() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (confirm('Are you sure you want to reject this quote?')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showSuccess('Quote rejected. You can contact the customer directly if needed.');</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('quote-form').style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function showError(message) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('loading').style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('error-message').textContent = message;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('error-message').style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function showSuccess(message) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('success-message').textContent = message;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('success-message').style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
